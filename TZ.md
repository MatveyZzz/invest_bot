# Stocks bot - техническое задание

## Краткое описание:
Проект представляет из себя Telegram-бота, который будет присылать актуальную информацию об акциях заранее выбранных компаний на рынке по запросу пользователя или в формате ежедневной рассылки, если пользователь захочет этого. Также, одной из особенностей бота будет краткий анализ ситуации на рынке с помощью нейросетей.

## Взаимодействие с ботом:  
Взаимодействие с ботом будет поделено на несколько меню, содержащих кнопки для управления *(Дальнейшие пункты представлены в виде "__Меню: список кнопок__")*.
### Начало:
1. __Получить информацию об акциях компании__ - кнопка, перенаправляющая пользователя в __[соответствующее меню](#получение-информации-о-конкретной-компании)__, где он сможет получить информацию об акциях конкретной компании с помощью поиска.
2. __Обновить информацию__ - отправка пользователю актуальной информации об акциях выбранных пользователем компаний в текущий момент.
3. __Краткая сводка__ - отправка пользователю краткого анализа положения выбранных компаний на рынке, составленная с помощью ИИ.
4. __Настройки__ - кнопка, перенаправляющая пользователя в __[меню настроек](#меню-настроек)__.

### Получение информации о конкретной компании:
1. При переходе в данное меню бот спросит у пользователя название интересующей его компании. После её указания, бот выполнит поиск и при наличии совпадений выведет их списком кнопок *(Не больше 5 пунктов в списке, в противном случае будет доступно перелистывание)*. Пользователь выбирает нужную компанию, затем бот отправляет ему информацию об акциях компании.

2. __Назад__ - возвращение в предыдущее меню.

### Меню настроек:
1. __Настройка отслеживаемых компаний__ - переход в __[меню отслеживаемых компаний](#выбор-отслеживаемых-компаний)__, где пользователь сможет просмотреть, добавить или удалить отслеживаемые им компании.
2. __Сброс__ - удаление всей информации, сохранённой о пользователе.
3. __Включить/выключить ежедневную рассылку__ - включение/выключение ежедневной отправки информации об акциях отслеживаемых компаний пользователю. 
4. __Назад__ - возвращение в предыдущее меню.

### Настройка отслеживаемых компаний:
1. __Список отслеживаемых компаний__ - бот присылает список, в котором перечислены все компании, которые отслеживает пользователь.
2. __Добавить компанию__ - добавление компании через поиск, аналогичный поиску в __[меню получения информации о конкретной компании](#получение-информации-о-конкретной-компании)__, в список отслеживаемых.
3. __Удалить компанию__ - бот выводит список отслеживаемых компаний в виде списка кнопок *(Не больше 5 пунктов в списке, в противном случае будет доступно перелистывание)*. Пользователь нажимает на кнопку с названием компании, которую он хочет удалить из списка отслеживаемых, после чего он больше не будет получать информацию об акциях удалённой из списка компании.
4. __Назад__ - возвращение в предыдущее меню.

## Форматы ответов бота:

### Информация об акциях:  
При запросе информации об акциях, бот будет отправлять пользователю изображение/изображения с основной информацией об отслеживаемых компаниях, а также об их акциях. Изображение/изображения должны содержать краткую и в то же время понятную сводку информации.  

### Сводка о ситуации на рынке:
При запросе сводки о ситуации на рынке акций, бот обращвается к используемой модели ИИ и возвращает её ответ. Сводка будет содержать выдержку свежих новостей на рынке, в приоритете будут находиться новости об отслеживаемых пользователем компаниях.

## Используемые api:

### TwelveData API
*[Ссылка](https://twelvedata.com/)*
Данное api будет использоваться для получения информации на рынке: информации о компаниях и стоимости их акций.

### Google Gemini API
*[Ссылка](https://ai.google.dev/)*
api для обращения к моделям от Google, которые будут анализировать текущую ситуацию на рынке акций и делать сводку для пользователя.
___

Данные api можно использовать бесплатно, но с ограничениями по количеству запросов за определённый промежуток времени, в связи с чем сам бот будет иметь ряд ограничений:  
1. __Ограниченное количество отслеживаемых компаний__ - не более 3 компаний для каждого пользователя *(может измениться)*
2. __Ограниченное количество обновлений информации ою акциях отслеживаемых компаний__ - не более 3 запросов в день *(может измениться)*
3. __Ограниченное количество получения информации о конкретной компании__ - не более 5 запросов в день *(может измениться)*

## Хранение данных:
Данные будут храниться в базе данных, содержащей следующие таблицы: 
1. Таблица для записи информации об акциях и компаниях для сокращения количества обращений к [api](#twelvedata-api), а также для хранения недельной истории изменений на рынке.  
2. Таблица для хранения данных о пользователях и их отслеживаемых компаниях.